<!DOCTYPE html>
<html>
  <head>
    <title>Super Epic Tic Tac Toe</title>
    <style>
      button {
          width: 50px;
          height: 50px;
      }
    </style>
  </head>
  <body>
    <div id="Game">
      <h1>Tic Tac Toe</h1>
      <h2>It is payer <span id="playerTurn">X</span>s Turn</h2>
      <div id="board">
        
      </div>
    </div>

    <script>
      let playerTurn = Math.random() > 0.5 ? 'X' : 'O';
      let board = [
        ["-","-","-"], // row 1
        ["-","-","-"], // row 2
        ["-","-","-"], // row 3
      ];
      let playerHTML = document.getElementById('playerTurn');
      playerHTML.innerHTML = playerTurn;


      function renderBoard(board) {
        let htmlBoard = "";
        
        console.log(board);
        board.forEach(function (row, rowIndex) {
          console.log(row);
          htmlBoard += `<div class="row">`

            row.forEach(function (cell, columnIndex){
              console.log(cell);
              htmlBoard += `<button row="${rowIndex}" column="${columnIndex}" class="square">${cell}</button>`
            });

          htmlBoard += `</div>`
        });

        return htmlBoard;
      }

      function doSomething(event) {
        // console.log(event);
        if(event.target.innerHTML !== '-') {
          alert('player tried to cheat');
          return;
        }
        
        event.target.innerHTML = playerTurn;
        board[event.target.getAttribute('row')][event.target.getAttribute('column')] = playerTurn;
        getWinner();
       
        // if(getWinner == true then return; MIGHT NEED TO ADD THIS
       
        playerTurn = playerTurn == 'X' ? 'O' : 'X';

        playerHTML.innerHTML = playerTurn;
        console.log(board);
        // console.log('inside do something');
        
      }

      function getWinner() {
          if (
              (board[0][0] == board[0][1]) && (board[0][1] == board[0][2]) && (board[0][2] == board[1][0]) 
          && (board[1][0] == board[1][1]) && (board[1][1] == board[1][2]) && (board[1][2] == board[2][0]) 
          && (board[2][0] == board[2][1]) && (board[2][1] == board[2][2]) && (board[2][2] == board[0][0]) 
          && (board[0][0] == board[1][0]) && (board[1][0] == board[2][0]) && (board[2][0] == board[0][1]) 
          && (board[0][1] == board[1][1]) && (board[1][1] == board[2][1]) && (board[2][1] == board[0][2])
          && (board[0][2] == board[1][2]) && (board[1][2] == board[2][2]) && (board[2][2] == board[0][0])
          && (board[0][0] == board[1][1]) && (board[1][1] == board[2][2]) && (board[2][2] == board[0][2])
          && (board[0][2] == board[1][1]) && (board[1][1] == board[2][0]) && (board[2][0] == '-')
          ) {
            return;
          } else if (
              (board[0][0] == board[0][1]) && 
              (board[0][1] == board[0][2]) && 
              (board[0][2] !== '-')
              ) {
            alert(playerTurn + ' wins!')
          } else if (
              (board[1][0] == board[1][1]) && 
              (board[1][1] == board[1][2]) && 
              (board[1][2] !== '-')
              ) {
            alert(playerTurn + ' wins!')
          } else if (
              (board[2][0] == board[2][1]) && 
              (board[2][1] == board[2][2]) && 
              (board[2][2] !== '-')
              ) {
            alert(playerTurn + ' wins!')
          } else if (
              (board[0][0] == board[1][0]) && 
              (board[1][0] == board[2][0]) && 
              (board[2][0] !== '-')
              ) {
            alert(playerTurn + ' wins!')
          } else if (
              (board[0][1] == board[1][1]) && 
              (board[1][1] == board[2][1]) && 
              (board[2][1] !== '-')
              ) {
            alert(playerTurn + ' wins!')
          } else if (
              (board[0][2] == board[1][2]) && 
              (board[1][2] == board[2][2]) && 
              (board[2][2] !== '-')
              ) {
            alert(playerTurn + ' wins!')
          } else if (
              (board[0][0] == board[1][1]) && 
              (board[1][1] == board[2][2]) && 
              (board[2][2] !== '-')
              ) {
            alert(playerTurn + ' wins!')
          } else if (
              (board[0][2] == board[1][1]) && 
              (board[1][1] == board[2][0]) && 
              (board[2][0] !== '-')
              ) {
            alert(playerTurn + ' wins!') 
        } else {
            alert("it's a draw");
          }
      }

      //can  use || here instead of a bunch of if else statements
      // the first bit of code on getWinner function makes board disappear

    

    

      document.getElementById('board').innerHTML = renderBoard(board);

      let buttons = document.getElementsByClassName("square");

      for(var x = 0; x< buttons.length ; x++){
        buttons[x].addEventListener("click", doSomething);
      }

    //   const winningCombos = [
    //       board[[0][0]] == [0][1] == [0][2] //first row
        //   [1][0] == [1][1] == [1][2] //second row
        //   [2][0] == [2][1] == [2][2] //third row
        //   [0][0] == [1][0] == [2][0] //first column
        //   [0][1] == [1][1] == [2][1] //second column
        //   [0][2] == [1][2] == [2][2] //third column
        //   [0][0] == [1][1] == [2][2] //diag
          [0][2] == [1][1] == [2][0] //diag
    //   ]

    //   function checkWin() {
    //       if(board[event.target.getAttribute('row')][event.target.getAttribute('column')] === [0][0]) {
    //           alert('clicked this one')
    //       }
    //   }
    </script>
  </body>
</html>